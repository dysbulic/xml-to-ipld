{"version":3,"sources":["ForcedGraph.jsx","utils/dom.js","utils/content.js","utils/types.js","utils/structures.js","Restructure.jsx","FromCID.jsx","About.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["color","d3","graph","props","svg","useRef","useState","chart","setChart","useEffect","domNode","attr","simulation","force","strength","id","d","distance","on","node","x","y","link","source","target","append","selectAll","rezoom","bounds","getBBox","width","height","Object","assign","update","nodes","links","old","Map","data","map","get","join","enter","alpha","restart","chartOn","current","ref","ipfs","ipfsClient","host","port","camelCase","str","sep","split","part","i","toUpperCase","slice","nodeToJSON","children","depth","left","right","json","name","localName","type","nodeType","Node","ELEMENT_NODE","TEXT_NODE","ATTRIBUTE_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","value","textContent","test","length","attributes","fromEntries","rule","val","trim","filter","e","some","t","keys","optDeref","a","CID","isCID","dag","cleanAttributes","attrs","entries","style","prop","class","className","buildDOM","root","key","onBuildStart","onBuildEnd","onDOMStart","onDOMFinish","onLeaf","Error","Promise","values","all","child","parent","dom","push","includes","console","error","elem","React","createElement","parsererrorNS","DOMParser","parseFromString","getElementsByTagName","namespaceURI","isParseError","doc","getElementsByTagNameNS","getDoc","file","resolve","reject","reader","FileReader","onload","event","parser","xml","result","toString","html","firstChild","b","arraysEqual","Array","from","childNodes","n","head","body","list","typeOf","allOfType","text","readAsText","toTree","obj","leafFor","out","isArray","v","dfs","count","pre","step","nodeFor","childrenOf","forEach","ForcedGraph","loadable","isNum","maybe","fixViewBox","xmlns","w","h","viewBox","content","setContent","docTransforms","setGraph","status","setStatus","pid","cid","load","evt","files","btoa","documentElement","put","warn","message","align","direction","mt","listStyleType","_before","onChange","minH","maxW","fontSize","maxH","history","setDoc","paramCID","useParams","queryCID","URLSearchParams","useLocation","search","formCID","setFormCID","startTime","setStartTime","endTime","setEndTime","performance","now","useCallback","cidObj","time","toLocaleString","flexGrow","mr","as","onSubmit","placeholder","bg","ml","_placeholder","visibility","Link","to","RouterLink","m","textIndent","textAlign","title","theme","extendTheme","config","initialColorMode","styles","global","textDecoration","basename","isOpen","isActive","Button","position","top","ChevronDown","Hamburger","path","exact","component","FromCID","About","Restructure","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.8c6230b3.chunk.js","sourcesContent":["import * as d3 from 'd3'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { chakra } from '@chakra-ui/react'\n\nconst color = d3.scaleOrdinal(d3.schemeTableau10)\n\nconst width = 640\nconst height = 480\n\nconst chartOn = (domNode) => {\n  const svg = (\n    d3.select(domNode)\n    .attr('viewBox', [-width / 2, -height / 2, width, height])\n    .attr('width', '100%')\n    .attr('height', '100%')\n  )\n  const simulation = (\n    d3.forceSimulation()\n    .force('charge', d3.forceManyBody().strength(-1000))\n    .force('link', d3.forceLink().id(d => d.id).distance(200))\n    .force('x', d3.forceX())\n    .force('y', d3.forceY())\n    .on('tick', ticked)\n  )\n  let link = (\n    svg.append('g')\n    .attr('stroke', '#FFF')\n    .attr('stroke-width', 1.5)\n    .selectAll('line')\n  )\n  let node = (\n    svg.append('g')\n    .attr('stroke', '#FFF')\n    .attr('stroke-width', 1.5)\n    .selectAll('circle')\n  )\n\n  function ticked() {\n    node\n    .attr('cx', d => d.x)\n    .attr('cy', d => d.y)\n\n    link\n    .attr('x1', d => d.source.x)\n    .attr('y1', d => d.source.y)\n    .attr('x2', d => d.target.x)\n    .attr('y2', d => d.target.y)\n  }\n\n  const rezoom = () => {\n    const bounds = svg.node().getBBox()\n    const { x, y, width, height } = bounds\n    svg.attr('viewBox', [x, y, width, height])\n  }\n\n  const update = ({ nodes, links }) => {\n    // Make a shallow copy to protect against mutation, while\n    // recycling old nodes to preserve position and velocity.\n    //console.info({ nodes, links })\n    const old = new Map(node.data().map(d => [d.id, d]))\n    nodes = nodes.map(d => Object.assign(old.get(d.id) || {}, d))\n    links = links.map(d => Object.assign({}, d))\n\n    node = (\n      node.data(nodes, d => d.id)\n      .join((enter) => (\n        enter.append('circle')\n        .attr('r', 8)\n        .attr('fill', d => color(d.id))\n      ))\n    )\n    link = (\n      link.data(links, d => [d.source, d.target])\n      .join('line')\n    )\n\n    simulation.nodes(nodes)\n    simulation.force('link').links(links)\n    simulation.alpha(1).restart()\n\n    rezoom()\n  }\n\n  return Object.assign(svg.node(), { update, rezoom })\n}\n\nexport default ({\n  graph, ...props\n}) => {\n  const svg = useRef()\n  const [chart, setChart] = useState()\n\n  useEffect(() => {\n    setChart(chartOn(svg.current))\n  }, [])\n\n  useEffect(() => {\n    graph && chart?.update(graph)\n  }, [chart, graph])\n\n  return (\n    <chakra.svg {...props} ref={svg}/>\n  )\n}","import ipfsClient from 'ipfs-http-client'\nimport React from 'react'\nimport CID from 'cids'\n\nconst ipfs = (\n  ipfsClient({ host: 'ipfs.io', port: 443 })\n)\n\nexport const camelCase = (str, sep = '-') => (\n  str.split(sep)\n  .map((part, i) => {\n    if(i === 0) {\n      return part\n    } else {\n      return part[0].toUpperCase() + part.slice(1)\n    }\n  })\n  .join('')\n)\n\nexport const nodeToJSON = ({\n  node, children, depth, left, right\n}) => {\n  const json = {\n    name: node.localName, children,\n    depth, left, right,\n  }\n  json.type = ((() => {\n    switch(node.nodeType) {\n    case Node.ELEMENT_NODE: return 'element'\n    case Node.TEXT_NODE: return 'text'\n    case Node.ATTRIBUTE_NODE: return 'attribute'\n    case Node.CDATA_SECTION_NODE: return 'cdata'\n    case Node.ENTITY_REFERENCE_NODE: return 'reference'\n    case Node.ENTITY_NODE: return 'entity'\n    case Node.PROCESSING_INSTRUCTION_NODE: return 'instruction'\n    case Node.COMMENT_NODE: return 'comment'\n    case Node.DOCUMENT_NODE: return 'document'\n    case Node.DOCUMENT_TYPE_NODE: return 'doctype'\n    case Node.DOCUMENT_FRAGMENT_NODE: return 'fragment'\n    case Node.NOTATION_NODE: return 'notation'\n    default: return 'unknown'\n    }\n  })())\n  if(json.type === 'text' || json.type === 'cdata') {\n    delete json.name\n    json.value = node.textContent\n    if(/^\\n\\s*$/.test(json.value)) {\n      return null // Don't save inter-element whitespace\n    }\n  }\n  if(children.length === 0) {\n    delete json.children\n  }\n  json.attributes = Object.fromEntries(\n    [...node.attributes ?? []].map((attr) => {\n      let value = attr.value\n      if(attr.name === 'style') {\n        value = Object.fromEntries(\n          attr.value.split(';').map(\n            (rule) => {\n              const [name, ...val] = rule.split(':')\n              return [camelCase(name.trim()), val.join().trim()]\n            }\n          )\n          .filter(e => e.some(t => /\\S/.test(t)))\n        )\n      }\n      return [attr.name, value]\n    })\n  )\n  if(Object.keys(json.attributes).length === 0) {\n    delete json.attributes\n  }\n  return json\n}\n\n// Dereference a CID if the node is one\nconst optDeref = async (node) => {\n  if(CID.isCID(node)) {\n    return (await ipfs.dag.get(node)).value\n  }\n  return node\n}\n\nconst cleanAttributes = async (attributes) => {\n  attributes = await optDeref(attributes ?? {})\n\n  const attrs = {}\n  for(let [name, val] of Object.entries(attributes)) {\n    attrs[name] = await optDeref(val)\n  }\n\n  if(attrs.style) {\n    const style = {}\n    for(let [prop, val] of (\n      Object.entries(attrs.style)\n    )) {\n      style[camelCase(prop, '-')] = val\n    }\n    attrs.style = style\n  }\n\n  if(attrs.class) {\n    attrs.className = attrs.class\n    delete attrs.class\n  }\n  for(let attr of ['xml:space', 'xmlns:xlink', 'xlink:href']) {\n    if(attrs[attr]) {\n      attrs[camelCase(attr, ':')] = attrs[attr]\n      delete attrs[attr]\n    }\n  }\n  // ToDo: switch this to a blacklist & convert everything else\n  for(let attr of [\n    'flood-opacity', 'flood-color', 'stop-color',\n    'clip-rule', 'stroke-miterlimit', 'stroke-linejoin',\n    'stroke-linecap', 'stroke-width', 'clip-path',\n    'fill-rule', 'font-size', 'font-family',\n    'enable-background',\n  ]) {\n    if(attrs[attr]) {\n      attrs[camelCase(attr, '-')] = attrs[attr]\n      delete attrs[attr]\n    }\n  }\n\n  return attrs\n}\n\nexport const buildDOM = async ({\n  root, key = { val: 0 },\n  onBuildStart = null, onBuildEnd = null,\n  onDOMStart = null, onDOMFinish = null,\n  onLeaf = null,\n}) => {\n  root = await optDeref(root)\n  if(root.type !== 'element') {\n    throw new Error(`Root Type: ${root.type}`)\n  }\n  if(root.depth === 1 && root.left === 1) {\n    onBuildStart?.({ root })\n  }\n  root.children = await Promise.all(\n    Object.values(\n      await optDeref(root.children ?? [])\n    )\n    .map(optDeref)\n  )\n  const children = []\n  for(let child of root.children) {\n    if(child.type === 'element') {\n      onDOMStart?.({ parent: root, child })\n      child.children = await Promise.all(\n        Object.values(\n          await optDeref(child.children ?? [])\n        )\n        .map(optDeref)\n      )\n      const dom = await (\n        buildDOM({\n          root: child, key,\n          onBuildStart, onBuildEnd,\n          onDOMStart, onDOMFinish,\n          onLeaf,\n        })\n      )\n      onDOMFinish?.({ parent: root, child, node: dom })\n      children.push(dom)\n    } else if(['text', 'cdata'].includes(child.type)) {\n      onLeaf({ parent: root, child })\n      children.push(child.value)\n    } else if(child?.value?.trim() !== '') {\n      console.error('Child', child)\n    }\n  }\n  const attrs = await cleanAttributes(root.attributes)\n  attrs.key = ++key.val\n  const elem = React.createElement(\n    root.name, attrs, children.length > 0 ? children : null\n  )\n  if(root.depth === 1 && root.left === 1) {\n    onBuildEnd?.(root, elem)\n  }\n  return elem\n}\n","import { arraysEqual, allOfType } from './types'\n\nexport const parsererrorNS = (() => (\n  (new DOMParser())\n  .parseFromString('INVALID', 'application/xml')\n  .getElementsByTagName('parsererror')[0]\n  .namespaceURI\n))()\n\nexport const isParseError = (doc) => (\n  doc.getElementsByTagNameNS(\n    parsererrorNS, 'parsererror'\n  ).length > 0\n)\n\n// Return the contents of a file returned from\n// a form input. It first tries as XML. If that\n// succeeds, the DOM is returned. Next HTML is\n// tried. Most files (txt, png, m4a, etc.) are\n// inserted into a simple HTML document. HTML\n// produces a DOM which is returned.\nexport const getDoc = (file) => (\n  new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = (event) => {\n      const parser = new DOMParser()\n      const xml = parser.parseFromString(\n        event.target.result.toString(), 'application/xml'\n      )\n      if(!isParseError(xml)) {\n        return resolve(xml)\n      }\n      const html = parser.parseFromString(\n        event.target.result.toString(), 'text/html'\n      )\n      if(isParseError(html)) {\n        return resolve(null)\n      }\n      // Browsers will wrap the contents of any\n      // file in a <html><head/><body>…</body></html>\n      // structure.\n      if(\n        html.firstChild.localName === 'html'\n        && arraysEqual(\n          Array.from(html.firstChild.childNodes)\n          .map(n => n.localName),\n          ['head', 'body'],\n        )\n      ) {\n        const head = html.firstChild.firstChild\n        const body = html.firstChild.childNodes[1]\n        if(\n          head.childNodes.length === 0\n          && allOfType(\n            body.childNodes, Node.TEXT_NODE\n          )\n        ) {\n          const text = (\n            Array.from(body.childNodes)\n            .map(n => n.textContent)\n            .join()\n          )\n          return resolve(text)\n        }\n        return resolve(html)\n      }\n    }\n    reader.readAsText(file)\n  })\n)\n","// Checks if all the elements in a list have the\n// same node type\nexport const allOfType = (\n  (list, type, typeOf = (n) => n.nodeType) => (\n    Array.from(list)\n    .all(n => typeOf(n) === type)\n  )\n)\n\nexport const arraysEqual = (a, b) => {\n  if(a === b) return true\n  if(a == null || b == null) return false\n  if(a.length !== b.length) return false\n\n  for(let i = 0; i < a.length; ++i) {\n    if(a[i] !== b[i]) return false\n  }\n  return true\n}\n","// Creates a sharded object where each level\n// is a separate document.\nexport const toTree = (\n  async ({\n    obj, leafFor = async (n) => n,\n  }) => {\n    const out = {}\n    await Promise.all(\n      Object.entries(obj).map(\n        async ([key, val]) => {\n          if(Array.isArray(val)) {\n            out[key] = await Promise.all(\n              val.map(async (v) => (\n                await toTree({ obj: v, leafFor })\n              ))\n            )\n          } else if(typeof val === 'object') {\n            out[key] = await toTree({ obj: val, leafFor })\n          } else {\n            out[key] = val\n          }\n        }\n      )\n    )\n    return await leafFor(out)\n  }\n)\n\n// Depth-first search\nexport const dfs = ({\n  node, depth = 1, count = { current: 1 },\n  pre = (..._) => {},\n  step = (..._) => {},\n  nodeFor = ({ node, ..._ }) => node,\n  childrenOf = (node) => Array.from(node.childNodes),\n}) => {\n  // SQL nested set model, \"right\" is count on exit\n  const left = count.current\n  pre(node, depth, left)\n  const children = []\n  childrenOf(node).forEach(\n    (child) => {\n      count.current++\n      const result = dfs({\n        node: child,\n        pre, step, nodeFor,\n        childrenOf,\n        depth: depth + 1, count,\n      })\n      if(result) {\n        children.push(result)\n        step({\n          node, children,\n          depth, left, right: count.current,\n        })\n      }\n    }\n  )\n  return nodeFor({\n    node, children,\n    depth, left, right: count.current,\n  })\n}\n","import loadable from '@loadable/component'\nimport {\n  Flex, ListItem, UnorderedList, Text, Box,\n  Input,\n} from '@chakra-ui/react'\nimport React, { useState } from 'react'\nimport ipfsClient from 'ipfs-http-client'\nimport {\n  nodeToJSON, buildDOM,\n} from './utils/dom'\nimport { getDoc } from './utils/content'\nimport { dfs, toTree } from './utils/structures'\n\nconst ForcedGraph = loadable(() => import('./ForcedGraph'))\n//const DynGraph = loadable(() => import('./DynGraph'))\nexport const ipfs = (\n  ipfsClient({ host: 'localhost', port: 5001 })\n)\n\nconst isNum = (maybe) => (\n  /^(\\d+\\.?\\d*)|(\\d*\\.?\\d+)$/.test(maybe)\n)\n\nconst fixViewBox = (json) => {\n  // without this images won't fill the frame\n  if(json?.attributes?.xmlns === 'http://www.w3.org/2000/svg') {\n    const { width: w, height: h, viewBox: b } = (\n      json?.attributes\n    )\n    if(!b && isNum(w) && isNum(h)) {\n      json.attributes.viewBox = (\n        [0, 0, w, h].join(' ')\n      )\n    }\n    // ??= not supported by webpack\n    !w && (json.attributes.width = '100%')\n    !h && (json.attributes.height = '100%')\n  }\n}\n\nexport default () => {\n  const [content, setContent] = useState(null)\n  const docTransforms = [fixViewBox]\n  const [graph, setGraph] = (\n    useState({ nodes: [], links: []})\n  )\n  const [status, setStatus] = useState(null)\n  \n  const onBuildStart = ({ root }) => {\n    const id = `${root.left}:${root.right}`\n    const nodes = [{ id }]\n    const links = []\n    setGraph({ nodes, links })\n  }\n  const onDOMStart = ({ parent, child }) => {\n    const pid = `${parent.left}:${parent.right}`\n    const cid = `${child.left}:${child.right}`\n    setGraph(({ nodes = [], links = [] }) => ({\n      nodes: [\n        ...nodes,\n        { id: cid },\n      ],\n      links: [\n        ...links,\n        { source: pid, target: cid },\n      ],\n    }))\n  }\n  const load = async (evt) => {\n    const files = evt.target.files\n    const name = evt.target.value\n\n    if(files.length === 0) {\n      throw new Error('No file is selected')\n    }\n\n    const doc = await getDoc(files[0])\n    if(doc === null) {\n      setContent(<h1><code>null</code> Document</h1>)\n    } else if(typeof doc === 'string') {\n      // eslint-disable-next-line no-control-regex\n      if(/\\x00/.test(doc)) {\n        setContent(\n          <object data={`data:;base64,${btoa(doc)}`}>\n            <p>This was the binary object: {name}</p>\n          </object>\n        )\n      } else {\n        setContent(<pre>{doc}</pre>)\n      }\n    } else {\n      const json = dfs({\n        node: doc.documentElement,\n        nodeFor: nodeToJSON,\n      })\n      try {\n        docTransforms.forEach(t => t(json))\n        const cid = await toTree({\n          obj: json,\n          leafFor: async (node) => (\n            await ipfs.dag.put(node)\n          ),\n        })\n        const root = (await ipfs.dag.get(cid)).value\n        setStatus(\n          <Text>CID for {name}: {cid.toString()}</Text>\n        )\n        const dom = await buildDOM({\n          root, onBuildStart, onDOMStart, onLeaf: onDOMStart,\n        })\n        setContent(dom)\n      } catch(err) {\n        console.warn('Error Building', err)\n        setContent(\n          <>\n            <Text>Unable to create object.</Text>\n            <Text>Error: <q>{err.message}</q></Text>\n            <Text>If the error is with fetching, try the CORS solution above.</Text>\n          </>\n        )\n      }\n    }\n  }\n\n  return (\n    <Flex align=\"center\" direction=\"column\" mt={25}>\n      <Text>This program requires write access to an IPFS endpoint. If you want to use it from the web, you'll need to whitelist <code>dysbulic.github.io</code>.</Text>\n      <UnorderedList listStyleType=\"none\">\n        <ListItem _before={{ content: '\"$ \"' }}>ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '[\"http://localhost:3000\", \"http://localhost:5001\", \"https://webui.ipfs.io\", \"https://dysbulic.github.io\"]'</ListItem>\n        <ListItem _before={{ content: '\"$ \"' }}>ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods '[\"PUT\", \"POST\"]'</ListItem>\n      </UnorderedList>\n      <Input type=\"file\"\n        onChange={load}\n        minH=\"1.8em\" maxW={600} mt={6}\n        fontSize={30}\n      />\n      {status}\n      {content && (\n        <Box h=\"90vh\">\n          {content}\n        </Box>\n      )}\n      <ForcedGraph maxH=\"90vh\" {...{ graph }}/>\n    </Flex>\n  )\n}","import {\n  Flex, Input, Text, Box,\n} from '@chakra-ui/react'\nimport CID from 'cids'\nimport ForcedGraph from 'ForcedGraph'\nimport React, {\n  useEffect, useState, useCallback,\n} from 'react'\nimport { useParams } from 'react-router'\nimport { useLocation } from 'react-router-dom'\nimport { buildDOM } from './utils/dom'\n\nconst useQuery = () => (\n  new URLSearchParams(useLocation().search)\n)\n\nexport default ({ history }) => {\n  const [doc, setDoc] = useState(null)\n  const [graph, setGraph] = (\n    useState({ nodes: [], links: []})\n  )\n  const { cid: paramCID } = useParams()\n  const queryCID = useQuery().get('cid')\n  const cid = paramCID ?? queryCID\n  const [formCID, setFormCID] = useState('')\n  const [startTime, setStartTime] = useState()\n  const [endTime, setEndTime] = useState()\n\n  const onBuildStart = ({ root }) => {\n    const id = `${root.left}:${root.right}`\n    const nodes = [{ id }]\n    const links = []\n    setDoc(null)\n    setGraph({ nodes, links })\n    setStartTime(performance.now())\n    setEndTime(null)\n  }\n  const onDOMStart = ({ parent, child }) => {\n    const pid = `${parent.left}:${parent.right}`\n    const cid = `${child.left}:${child.right}`\n    setGraph(({ nodes = [], links = [] }) => ({\n      nodes: [\n        ...nodes,\n        { id: cid },\n      ],\n      links: [\n        ...links,\n        { source: pid, target: cid },\n      ],\n    }))\n  }\n  const onBuildEnd = () => {\n    setEndTime(performance.now())\n  }\n  const onSubmit = () => {\n    history.push(`/cid/${formCID}`)\n  }\n\n  const load = useCallback(\n    async () => {\n      try {\n        const cidObj = new CID(cid)\n        if(cidObj) {\n          setDoc(await buildDOM({\n            root: cidObj,\n            onBuildStart, onDOMStart,\n            onLeaf: onDOMStart,\n            onBuildEnd,\n          }))\n        }\n      } catch(err) {\n        if(cid) {\n          console.warn('Load Error', err)\n        }\n      }\n    }, [cid]\n  )\n  useEffect(() => { load() }, [load])\n\n  const time = (\n    (endTime ?? performance.now()) - (startTime ?? 0)\n  )\n\n  return (\n    <Flex direction=\"column\" align=\"center\">\n      {cid ? (\n        <>\n          <Text>Loading: {cid} ({time.toLocaleString()}ms)</Text>\n          <Flex w=\"100%\" h=\"90vh\">\n            <ForcedGraph\n              {...{ graph }}\n              flexGrow={1} mr={100}\n            />\n            {doc}\n          </Flex>\n        </>\n      ) : (\n        <Box as=\"form\" id=\"cid\" w=\"100%\" {...{ onSubmit }}>\n          <Input\n            value={formCID ?? ''}\n            onChange={\n              (evt) => setFormCID(evt.target.value)\n            }\n            placeholder=\"IPFS Content ID\"\n            bg=\"white\"\n            color=\"black\"\n            ml={20} mt={6}\n            maxW=\"93%\"\n            _placeholder={{ color: '#333' }}\n          />\n          <Input type=\"submit\" visibility=\"hidden\"/>\n        </Box>\n      )}\n    </Flex>\n  )\n}","import {\n  Flex, Heading, ListItem, Text, UnorderedList,\n  Link as ChakraLink,\n} from '@chakra-ui/react'\nimport React from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\n\nconst Link = ({ children, to }) => (\n  <ChakraLink\n    as={RouterLink}\n    {...{ to }}\n  >{children}</ChakraLink>\n)\n\nexport default () => (\n  <Flex\n    maxW=\"50rem\" m=\"auto\" fontSize={20} direction=\"column\" align=\"center\"\n  >\n    <Heading m={10}>XML to IPLD Converter</Heading>\n    <Text style={{ textIndent: 25, textAlign: 'justify' }}>This program takes an XML document, converts it into an <acronym title=\"Interplanetary Filesystem\">IPFS</acronym> <acronym title=\"Directed Acyclic Graph\">DAG</acronym> representing the <acronym title=\"Document Object Model\">DOM</acronym> where each node is a separate document linked to the others by <acronym title=\"Content Identifier\">CID</acronym>s. The program then walks the <acronym title=\"Common Binary Object Representation\">CBOR</acronym> structure and rebuilds the DOM tree.</Text>\n    <Text style={{ textIndent: 25, textAlign: 'justify' }} mt={5}>This method of storage has some interesting properties having to do with reusing unchanged subgraphs &amp; minimizing document size. The question was how long will it take to load, thus this program.</Text>\n    <Flex w=\"100%\" align=\"flex-start\" direction=\"column\">\n      <Text mt={5}>Examples:</Text>\n      <UnorderedList>\n        <ListItem><Link to=\"/cid/bafyreiadbcuiiwmdhzca2ajxwjgguwjyidujex2ptfu77rpidyt65lsm5e\">Gazoo</Link> <i>(~20 nodes)</i></ListItem>\n        <ListItem><Link to=\"/cid/bafyreibu2ase2fvphe47yjfiebtvvx236f4pbgqzgraayyd2bfszekldzi\">MetaGame Flag</Link> <i>(~30 nodes)</i></ListItem>\n        <ListItem><Link to=\"/cid/bafyreif645kruyhewydqwyjpor6z24mu3dzj2jsi6f2w57xoxcmnlf4ypa\">Linux Fox</Link> <i>(~150 nodes)</i></ListItem>\n        <ListItem><Link to=\"/cid/bafyreihqodbfy47utwfqyxnmsxpxgs5p3g5opcqnilor6flt3lwhksxrsu\">Chakras</Link> <i>(1000+ nodes)</i></ListItem>\n      </UnorderedList>\n    </Flex>\n  </Flex>\n)","import React from 'react'\nimport {\n  HashRouter as Router, Switch, Route,\n  Link as RouterLink,\n} from 'react-router-dom'\nimport {\n  ChakraProvider, extendTheme, Menu, MenuItem,\n  MenuButton, Button, MenuList, Link as ChakraLink,\n} from '@chakra-ui/react'\nimport {\n  ChevronDownIcon, HamburgerIcon\n} from \"@chakra-ui/icons\"\n//import { Provider } from 'react-redux'\nimport Restructure from './Restructure'\nimport FromCID from './FromCID'\nimport About from './About'\n\nconst overrides = {\n  config: {\n    initialColorMode: 'dark',\n  },\n  styles: {\n    global: {\n      body: {\n        minH: '100vh',\n      },\n      a: {\n        textDecoration: 'underline',\n      },\n    },\n  },\n}\nconst theme = extendTheme(overrides)\n\nconst Link = ({ children, to }) => (\n  <ChakraLink\n    as={RouterLink}\n    {...{ to }}\n    w='100%'\n  >{children}</ChakraLink>\n)\n\nexport default () => (\n  <ChakraProvider theme={theme}>\n    {/* <Provider store={store}> */}\n    <Router basename='/'>\n      <Menu>\n        {({ isOpen }) => (\n          <>\n            <MenuButton\n              isActive={isOpen} as={Button}\n              position='fixed' top='1rem' left='1rem'\n            >\n              {isOpen ? <ChevronDownIcon/> : <HamburgerIcon/>}\n            </MenuButton>\n            <MenuList>\n            <MenuItem>\n                <Link to='/'>🏡 Home</Link>\n              </MenuItem>\n              <MenuItem>\n                <Link to='/cid'>✍ By <acronym title=\"Content Identifier\">CID</acronym></Link>\n              </MenuItem>\n              <MenuItem>\n                <Link to='/about'>📰 About</Link>\n              </MenuItem>\n            </MenuList>\n          </>\n        )}\n      </Menu>\n      <Switch>\n      <Route\n        path='/cid/:cid?'\n        exact={false}\n        component={FromCID}\n      />\n      <Route path='/about' component={About}/>\n      <Route path='/' exact={false} component={Restructure}/>\n      </Switch>\n    </Router>\n  {/* </Provider> */}\n  </ChakraProvider>\n)","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChakraProvider } from \"@chakra-ui/react\"\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider>\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}